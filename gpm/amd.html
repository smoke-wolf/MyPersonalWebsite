<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <style>
        :root {
            --bg-color-light: #fff;
            --bg-color-dark: #111;
            --text-color-light: #333;
            --text-color-dark: #fff;
            --button-bg-light: #007bff;
            --button-bg-dark: #444;
            --button-text-light: #fff;
            --button-text-dark: #fff;
            --result-bg-light: #f0f0f0;
            --result-bg-dark: #222;
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: var(--bg-color-light);
            transition: background-color 0.3s;
            color: var(--text-color-light);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        #admin-panel {
            width: 50%;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            display: block;
            margin: 10px;
            padding: 10px;
            background-color: var(--button-bg-light);
            color: var(--button-text-light);
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        #result {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            background-color: var(--result-bg-light);
            transition: background-color 0.3s;
        }

        .toggle-dark-mode {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px;
            background-color: var(--button-bg-light);
            color: var(--button-text-light);
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
    </style>
</head>
<body>
    <button class="toggle-dark-mode" onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <h1>Admin Panel</h1>
    <div id="admin-panel">
        <button id="tos-button">TOS</button>
        <button id="your-data-button">Your Data</button>
        <button id="eula-button">Your Usage Logs</button>
        <button id="wpm-button">WPM</button>
    </div>
    <div id="result"></div>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get('username');
    const authToken = urlParams.get('token');

    if (!username || !authToken) {
        alert("Username and token are required in the URL.");
    } else {
        const buttons = document.querySelectorAll('button');
        const resultDiv = document.getElementById('result');

        buttons.forEach(button => {
            button.addEventListener('click', () => {
                const endpoint = button.id;
                const url = `https://hello2022isthe3nd.000webhostapp.com/del.php/?username=${username}&token=${authToken}&endpoint=${endpoint}`;

                const xhr = new XMLHttpRequest();
                xhr.open("GET", url, true);

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const response = JSON.parse(xhr.responseText);
                            const data = response.data;

                            resultDiv.innerHTML = '';

                            if (endpoint === "your-data-button") {
                                // Display "Your Data" results as is
                                resultDiv.innerHTML = `<h2>${button.textContent}:</h2><p>${data}</p>`;
                            } else if (endpoint === "wpm-button") {
                                // Split "WPM" results on every space
                                const words = data.split(" ");
                                resultDiv.innerHTML = `<h2>${button.textContent}:</h2>`;
                                words.forEach(word => {
                                    resultDiv.innerHTML += `<p>\n ${word}<br></p>`;
                                });
                            } else {
                                // Split data into segments based on "Data1="
                                const segments = data.split("Data1=");
                                segments.forEach(segment => {
                                    const segmentData = segment.split("\n");
                                    const date = segmentData.find(line => line.startsWith("Data3="));

                                    if (date) {
                                        const formattedDate = date.replace("Data3=", "").trim();
                                        const div = document.createElement("div");
                                        div.innerHTML = `<h2>${formattedDate}</h2>`;

                                        for (let i = 1; i <= 5; i++) {
                                            const dataKey = `Data${i}=`;
                                            const dataValue = segmentData.find(line => line.startsWith(dataKey));
                                            if (dataValue) {
                                                const formattedData = dataValue.replace(dataKey, "").trim();
                                                div.innerHTML += `<details><summary>${dataKey}</summary><p>${formattedData}</p></details>`;
                                            }
                                        }

                                        resultDiv.appendChild(div);
                                    }
                                });
                            }
                        } else {
                            resultDiv.innerHTML = "<p>Error fetching data</p>";
                        }
                    }
                };

                xhr.send();
            });
        });
    }

    // Dark mode toggle
    let darkMode = false;

    const toggleDarkMode = () => {
        const root = document.documentElement;
        darkMode = !darkMode;

        if (darkMode) {
            root.style.setProperty('--bg-color', var(--bg-color-dark));
            root.style.setProperty('--text-color', var(--text-color-dark));
            root.style.setProperty('--button-bg', var(--button-bg-dark));
            root.style.setProperty('--button-text', var(--button-text-dark));
            root.style.setProperty('--result-bg', var(--result-bg-dark));
        } else {
            root.style.setProperty('--bg-color', var(--bg-color-light));
            root.style.setProperty('--text-color', var(--text-color-light));
            root.style.setProperty('--button-bg', var(--button-bg-light));
            root.style.setProperty('--button-text', var(--button-text-light));
            root.style.setProperty('--result-bg', var(--result-bg-light));
        }
    };
</script>
</body>
</html>
